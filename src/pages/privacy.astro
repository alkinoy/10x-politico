---
import Layout from "@/layouts/Layout.astro";

const lastUpdated = "October 30, 2025";
const description =
  "Privacy Policy for SpeechKarma - learn how we collect, use, and protect your personal information.";
const canonicalUrl = new URL("/privacy", Astro.url.origin);
---

<Layout title="Privacy Policy - SpeechKarma" description={description}>
  <Fragment slot="head">
    <meta name="robots" content="index, follow" />
    <meta property="og:title" content="Privacy Policy - SpeechKarma" />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl.toString()} />
    <link rel="canonical" href={canonicalUrl.toString()} />

    <!-- Structured Data (JSON-LD) -->
    <script
      type="application/ld+json"
      set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "WebPage",
        name: "Privacy Policy",
        description: description,
        url: canonicalUrl.toString(),
        dateModified: "2025-10-30",
        inLanguage: "en-US",
        isPartOf: {
          "@type": "WebSite",
          name: "SpeechKarma",
          url: Astro.url.origin,
        },
        mainEntity: {
          "@type": "PrivacyPolicy",
          name: "SpeechKarma Privacy Policy",
          datePublished: "2025-10-30",
          publisher: {
            "@type": "Organization",
            name: "SpeechKarma",
          },
        },
      })}
    />
  </Fragment>
  <main class="min-h-screen bg-background py-12">
    <article class="container mx-auto max-w-4xl px-4">
      <!-- Page Header -->
      <header class="mb-8 border-b pb-6">
        <h1 class="text-3xl font-bold tracking-tight sm:text-4xl">Privacy Policy</h1>
        <p class="mt-2 text-sm text-muted-foreground">
          Last updated: <time datetime="2025-10-30">{lastUpdated}</time>
        </p>
      </header>

      <!-- Content -->
      <div class="legal-prose max-w-none">
        <section>
          <h2>1. Introduction</h2>
          <p>
            At SpeechKarma, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose,
            and safeguard your information when you use our service. Please read this policy carefully to understand our
            practices regarding your personal data.
          </p>
          <p>
            By using SpeechKarma, you agree to the collection and use of information in accordance with this policy.
          </p>
        </section>

        <section>
          <h2>2. Information We Collect</h2>

          <h3>2.1 Account Information</h3>
          <p>When you create an account, we collect:</p>
          <ul>
            <li><strong>Email address:</strong> Required for account creation and authentication</li>
            <li><strong>Password:</strong> Stored securely using industry-standard encryption</li>
            <li><strong>Display name:</strong> Optional, shown publicly when you submit statements</li>
          </ul>

          <h3>2.2 Submitted Content</h3>
          <p>When you submit statements, we collect:</p>
          <ul>
            <li><strong>Statement text:</strong> The content of the political statement</li>
            <li><strong>Statement metadata:</strong> Politician attribution, date/time, and creation timestamp</li>
            <li><strong>User association:</strong> Link between your account and submitted statements</li>
          </ul>

          <h3>2.3 Usage Data</h3>
          <p>We may collect information about how you interact with our service:</p>
          <ul>
            <li>Pages visited and features used</li>
            <li>Time spent on the service</li>
            <li>Browser type and version</li>
            <li>Device information</li>
            <li>IP address (anonymized)</li>
          </ul>

          <h3>2.4 Cookies and Tracking</h3>
          <p>We use cookies and similar tracking technologies to:</p>
          <ul>
            <li>Maintain your login session</li>
            <li>Remember your preferences</li>
            <li>Analyze usage patterns</li>
            <li>Improve service performance</li>
          </ul>
        </section>

        <section>
          <h2>3. How We Use Your Information</h2>
          <p>We use collected information for the following purposes:</p>
          <ul>
            <li>
              <strong>Provide the service:</strong> Enable you to browse statements, create an account, and submit content
            </li>
            <li>
              <strong>Account management:</strong> Authenticate users, maintain accounts, and provide customer support
            </li>
            <li><strong>Display content:</strong> Show your submitted statements and display name publicly</li>
            <li>
              <strong>Service improvement:</strong> Analyze usage patterns to improve features and user experience
            </li>
            <li><strong>Communication:</strong> Send important service updates and respond to inquiries</li>
            <li><strong>Security:</strong> Detect and prevent fraud, abuse, and security incidents</li>
            <li><strong>Legal compliance:</strong> Comply with legal obligations and enforce our terms</li>
          </ul>
        </section>

        <section>
          <h2>4. Information Sharing and Disclosure</h2>

          <h3>4.1 Public Information</h3>
          <p>The following information is public and visible to all users:</p>
          <ul>
            <li>Your display name (if provided)</li>
            <li>Statements you submit</li>
            <li>Statement metadata (politician, date/time)</li>
          </ul>
          <p>
            Your email address is <strong>never</strong> displayed publicly.
          </p>

          <h3>4.2 Service Providers</h3>
          <p>We use third-party service providers to operate our service:</p>
          <ul>
            <li><strong>Supabase:</strong> Database hosting and authentication services</li>
            <li><strong>Hosting provider:</strong> Web hosting and content delivery</li>
          </ul>
          <p>
            These providers have access to your information only to perform services on our behalf and are obligated to
            protect your data.
          </p>

          <h3>4.3 Legal Requirements</h3>
          <p>We may disclose your information if required to:</p>
          <ul>
            <li>Comply with legal obligations or court orders</li>
            <li>Protect our rights, property, or safety</li>
            <li>Investigate potential violations of our terms</li>
            <li>Prevent fraud or security incidents</li>
          </ul>

          <h3>4.4 Business Transfers</h3>
          <p>
            If SpeechKarma is involved in a merger, acquisition, or asset sale, your information may be transferred. We
            will provide notice before your data is transferred and becomes subject to a different privacy policy.
          </p>
        </section>

        <section>
          <h2>5. Data Security</h2>
          <p>We implement appropriate technical and organizational measures to protect your information:</p>
          <ul>
            <li><strong>Encryption:</strong> Data is encrypted in transit using HTTPS/TLS</li>
            <li><strong>Password security:</strong> Passwords are hashed using industry-standard algorithms</li>
            <li><strong>Access controls:</strong> Limited access to personal data by authorized personnel only</li>
            <li><strong>Regular updates:</strong> Security patches and updates applied promptly</li>
          </ul>
          <p>
            However, no method of transmission over the internet or electronic storage is 100% secure. While we strive
            to protect your information, we cannot guarantee absolute security.
          </p>
        </section>

        <section>
          <h2>6. Your Rights and Choices</h2>

          <h3>6.1 Access and Correction</h3>
          <p>You have the right to:</p>
          <ul>
            <li>Access your account information and submitted statements</li>
            <li>Update your display name and password</li>
            <li>Edit or delete statements within the 15-minute grace period</li>
          </ul>

          <h3>6.2 Account Deletion</h3>
          <p>You may request deletion of your account by contacting us. Upon deletion:</p>
          <ul>
            <li>Your account and email will be permanently removed</li>
            <li>Your submitted statements may remain on the platform but will be anonymized</li>
            <li>The process may take up to 30 days to complete</li>
          </ul>

          <h3>6.3 Cookie Preferences</h3>
          <p>You can control cookies through your browser settings:</p>
          <ul>
            <li>Block all cookies (may impact functionality)</li>
            <li>Delete existing cookies</li>
            <li>Accept cookies on a case-by-case basis</li>
          </ul>
          <p>Note: Disabling authentication cookies will prevent you from logging in.</p>

          <h3>6.4 Marketing Communications</h3>
          <p>
            We do not send marketing emails. Service-related communications (account security, policy updates) cannot be
            opted out of as they are essential to the service.
          </p>
        </section>

        <section>
          <h2>7. Data Retention</h2>
          <p>We retain your information for as long as:</p>
          <ul>
            <li>Your account is active</li>
            <li>Necessary to provide the service</li>
            <li>Required by law or for legitimate business purposes</li>
          </ul>
          <p>
            Submitted statements are retained as part of the public record, even after account deletion (though they
            will be anonymized).
          </p>
        </section>

        <section>
          <h2>8. Children's Privacy</h2>
          <p>
            SpeechKarma is not intended for users under the age of 13. We do not knowingly collect personal information
            from children under 13. If we discover that a child under 13 has provided us with personal information, we
            will delete it immediately.
          </p>
          <p>
            If you believe a child under 13 has provided information to us, please contact us at
            <a href="mailto:privacy@speechkarma.example" class="text-primary hover:underline"
              >privacy@speechkarma.example</a
            >.
          </p>
        </section>

        <section>
          <h2>9. International Data Transfers</h2>
          <p>
            Your information may be transferred to and maintained on servers located outside your country of residence.
            By using SpeechKarma, you consent to the transfer of information to countries that may have different data
            protection laws than your jurisdiction.
          </p>
        </section>

        <section>
          <h2>10. Changes to This Privacy Policy</h2>
          <p>We may update this Privacy Policy from time to time. When we make changes:</p>
          <ul>
            <li>We will update the "Last updated" date at the top of this page</li>
            <li>Significant changes will be communicated via email or prominent notice</li>
            <li>Continued use after changes constitutes acceptance of the updated policy</li>
          </ul>
          <p>
            We encourage you to review this Privacy Policy periodically to stay informed about how we protect your
            information.
          </p>
        </section>

        <section>
          <h2>11. Contact Us</h2>
          <p>
            If you have questions, concerns, or requests regarding this Privacy Policy or your personal data, please
            contact us:
          </p>
          <ul>
            <li>
              <strong>Email:</strong>
              <a href="mailto:privacy@speechkarma.example" class="text-primary hover:underline"
                >privacy@speechkarma.example</a
              >
            </li>
            <li><strong>Data requests:</strong> Access, correction, or deletion requests</li>
            <li><strong>Privacy inquiries:</strong> Questions about how we handle your data</li>
          </ul>
          <p>We will respond to all requests within 30 days.</p>
        </section>
      </div>

      <!-- Back to Home Link -->
      <div class="mt-12 border-t pt-6">
        <a href="/" class="inline-flex items-center text-sm font-medium text-primary hover:underline">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="mr-2 h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"
            ></path>
          </svg>
          Back to Home
        </a>
      </div>
    </article>
  </main>
</Layout>

<style>
  .legal-prose {
    font-size: 1rem;
    line-height: 1.75;
    color: var(--color-foreground);
  }

  .legal-prose h2 {
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    font-size: 1.5rem;
    font-weight: 600;
    letter-spacing: -0.025em;
  }

  .legal-prose h3 {
    margin-top: 2rem;
    margin-bottom: 0.75rem;
    font-size: 1.25rem;
    font-weight: 600;
  }

  .legal-prose p {
    margin-bottom: 1rem;
  }

  .legal-prose ul {
    margin-bottom: 1rem;
    margin-left: 1.5rem;
    list-style-type: disc;
  }

  .legal-prose ul li {
    padding-left: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .legal-prose section {
    margin-bottom: 2rem;
  }

  .legal-prose a {
    color: var(--color-primary);
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
  }

  .legal-prose a:hover {
    text-decoration: underline;
  }

  .legal-prose strong {
    font-weight: 600;
  }

  /* Print-friendly styles */
  @media print {
    /* Hide non-essential elements when printing */
    nav,
    footer,
    .back-link {
      display: none;
    }

    /* Optimize page breaks */
    .legal-prose section {
      page-break-inside: avoid;
    }

    .legal-prose h2,
    .legal-prose h3 {
      page-break-after: avoid;
    }

    /* Ensure good contrast for printing */
    body {
      background: white !important;
      color: black !important;
    }

    .legal-prose {
      color: black;
    }

    /* Adjust spacing for print */
    main {
      padding: 0;
      margin: 0;
    }

    article {
      max-width: none;
      padding: 0.5in;
    }

    /* Show link URLs for reference */
    .legal-prose a::after {
      content: " (" attr(href) ")";
      font-size: 0.8em;
      color: #666;
    }

    /* Don't show URLs for internal navigation */
    .back-link a::after,
    a[href^="/"]:not([href*="mailto"])::after {
      content: "";
    }
  }
</style>
